const fs = require('fs');
const path = require('path');

const inputFile = path.join(__dirname, '../data/words.txt');
const outputFile = path.join(__dirname, '../src/wordlist.ts');

fs.readFile(inputFile, 'utf8', (err, data) => {
    if (err) {
        console.error('Error reading the wordlist file:', err);
        return;
    }

    // แยกคำศัพท์แต่ละบรรทัด
    let words = data.split(/\r?\n/);

    // กรองคำว่าง, ตัดช่องว่างหัวท้าย, แปลงเป็นตัวพิมพ์ใหญ่
    words = words
        .filter(word => word.trim().length > 0)
        .map(word => word.trim().toUpperCase());

    // ลบคำซ้ำ (Optional, แต่แนะนำ)
    words = [...new Set(words)];

    // สร้างเนื้อหาสำหรับไฟล์ TypeScript
    const tsContent = `// This file is auto-generated by scripts/generate-wordlist.js
export const ALL_WORDS: string[] = [\n${words.map(word => `    "${word}"`).join(',\n')}\n];\n`;

    fs.writeFile(outputFile, tsContent, 'utf8', (err) => {
        if (err) {
            console.error('Error writing the TypeScript wordlist file:', err);
            return;
        }
        console.log(`Successfully generated ${outputFile} with ${words.length} words.`);
    });
});